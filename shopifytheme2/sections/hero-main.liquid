{%- liquid
  assign text_alignment = section.settings.text_alignment
  assign image_position = section.settings.image_position
-%}

{%- style -%}
  #shopify-section-{{ section.id }} .kawaii-hero {
    position: relative;
    overflow: hidden;
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  #shopify-section-{{ section.id }} .kawaii-hero__inner {
    display: grid;
    gap: 2.4rem;
    align-items: center;
  }

  #shopify-section-{{ section.id }} .kawaii-hero__copy {
    max-width: 56rem;
    text-align: {{ text_alignment }};
  }

  #shopify-section-{{ section.id }} .kawaii-hero__eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 0.8rem;
    padding: 0.6rem 1.6rem;
    margin: 0 0 1.2rem;
    border-radius: 999px;
    background: rgba(var(--color-background-contrast), 0.08);
    color: rgba(var(--color-foreground), 0.85);
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-size: 1.2rem;
  }

  #shopify-section-{{ section.id }} .kawaii-hero__title {
    margin: 0 0 1.2rem;
    font-size: clamp(3.6rem, 4vw + 1rem, 5.4rem);
    line-height: 1.05;
  }

  #shopify-section-{{ section.id }} .kawaii-hero__subtitle {
    margin: 0 0 2rem;
    font-size: 1.7rem;
    line-height: 1.6;
    color: rgba(var(--color-foreground), 0.75);
  }

  #shopify-section-{{ section.id }} .kawaii-hero__actions {
    display: flex;
    gap: 1.2rem;
    flex-wrap: wrap;
    justify-content: {{ text_alignment }};
  }

  #shopify-section-{{ section.id }} .kawaii-hero__media {
    position: relative;
    width: min(52rem, 100%);
    justify-self: {{ image_position | replace: 'right', 'end' | replace: 'left', 'start' }};
  }

  #shopify-section-{{ section.id }} .kawaii-hero__blob {
    position: absolute;
    inset: -18% -18% -12% -18%;
    filter: blur(0);
    background: radial-gradient(circle at 20% 20%, rgba(255, 214, 234, 0.7), transparent 45%),
      radial-gradient(circle at 80% 0%, rgba(199, 235, 255, 0.65), transparent 38%),
      radial-gradient(circle at 60% 90%, rgba(255, 237, 179, 0.65), transparent 40%);
    opacity: 0.9;
    transform: rotate(-2deg);
  }

  #shopify-section-{{ section.id }} .kawaii-hero__image {
    position: relative;
    display: block;
    width: 100%;
    border-radius: 24px;
    box-shadow: 0 24px 48px rgba(0, 0, 0, 0.08);
    overflow: hidden;
  }

  #shopify-section-{{ section.id }} .kawaii-hero__sticker {
    position: absolute;
    bottom: 4%;
    {% if image_position == 'right' %}
      left: -6%;
    {% else %}
      right: -6%;
    {% endif %}
    width: 120px;
    rotate: -6deg;
    filter: drop-shadow(0 12px 24px rgba(0, 0, 0, 0.12));
  }

  #shopify-section-{{ section.id }} .kawaii-hero__sticker img {
    display: block;
    width: 100%;
    height: auto;
  }

  @media screen and (min-width: 990px) {
    #shopify-section-{{ section.id }} .kawaii-hero__inner {
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4rem;
    }

    #shopify-section-{{ section.id }} .kawaii-hero__copy {
      justify-self: {{ image_position | replace: 'right', 'start' | replace: 'left', 'end' }};
      text-align: {{ text_alignment }};
    }
  }

  @media screen and (max-width: 989px) {
    #shopify-section-{{ section.id }} .kawaii-hero {
      padding-top: {{ section.settings.padding_top | times: 0.55 | round: 0 }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.55 | round: 0 }}px;
    }

    #shopify-section-{{ section.id }} .kawaii-hero__media {
      order: -1;
      justify-self: center;
    }

    #shopify-section-{{ section.id }} .kawaii-hero__actions {
      justify-content: center;
    }

    #shopify-section-{{ section.id }} .kawaii-hero__sticker {
      bottom: 2%;
      {% if image_position == 'right' %}
        left: 6%;
      {% else %}
        right: 6%;
      {% endif %}
      width: 96px;
    }
  }
{%- endstyle -%}

<div class="kawaii-hero color-{{ section.settings.color_scheme }} gradient">
  <div class="page-width">
    <div class="kawaii-hero__inner">
      <div class="kawaii-hero__copy">
        {% if section.settings.eyebrow != blank %}
          <p class="kawaii-hero__eyebrow">
            {{ section.settings.eyebrow }}
          </p>
        {% endif %}

        {% if section.settings.heading != blank %}
          <h2 class="kawaii-hero__title {{ section.settings.heading_size }}">
            {{ section.settings.heading | escape }}
          </h2>
        {% endif %}

        {% if section.settings.subheading != blank %}
          <p class="kawaii-hero__subtitle">
            {{ section.settings.subheading }}
          </p>
        {% endif %}

        <div class="kawaii-hero__actions">
          {% if section.settings.primary_label != blank and section.settings.primary_link != blank %}
            <a
              class="button button--primary"
              href="{{ section.settings.primary_link }}"
            >
              {{ section.settings.primary_label }}
            </a>
          {% endif %}
          {% if section.settings.secondary_label != blank and section.settings.secondary_link != blank %}
            <a
              class="button button--secondary"
              href="{{ section.settings.secondary_link }}"
            >
              {{ section.settings.secondary_label }}
            </a>
          {% endif %}
        </div>
      </div>

      <div class="kawaii-hero__media">
        <div class="kawaii-hero__blob" aria-hidden="true"></div>
        {% if section.settings.image != blank %}
          {% capture sizes %}
            (min-width: 990px) 520px, 90vw
          {% endcapture %}
          {% capture widths %}
            320, 480, 640, 800, 960, 1040
          {% endcapture %}
          {{
            section.settings.image
            | image_url: width: 1040
            | image_tag:
              class: 'kawaii-hero__image',
              widths: widths,
              sizes: sizes,
              alt: section.settings.image.alt | escape
          }}
        {% else %}
          <div class="kawaii-hero__image placeholder media">
            {{ 'lifestyle-2' | placeholder_svg_tag: 'placeholder-svg' }}
          </div>
        {% endif %}

        {% if section.settings.sticker_image != blank %}
          <div class="kawaii-hero__sticker">
            {{
              section.settings.sticker_image
              | image_url: width: 260
              | image_tag:
                widths: '120, 160, 260',
                sizes: '120px',
                alt: section.settings.sticker_image.alt | escape
            }}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Hero (Quirk & Craft)",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Eyebrow text",
      "default": "New drop"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Kawaii crafts that spark joy"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "h1", "label": "H1" },
        { "value": "h2", "label": "H2" }
      ],
      "default": "h1"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Playful plushies, stationery, and handmade gifts from indie makers. Curated to brighten up your desk and your day."
    },
    {
      "type": "text",
      "id": "primary_label",
      "label": "Primary button label",
      "default": "Shop new arrivals"
    },
    {
      "type": "url",
      "id": "primary_link",
      "label": "Primary button link",
      "default": "/collections/all"
    },
    {
      "type": "text",
      "id": "secondary_label",
      "label": "Secondary button label",
      "default": "View bestsellers"
    },
    {
      "type": "url",
      "id": "secondary_link",
      "label": "Secondary button link",
      "default": "/collections"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Hero image"
    },
    {
      "type": "image_picker",
      "id": "sticker_image",
      "label": "Sticker overlay image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image position on desktop",
      "options": [
        { "value": "right", "label": "Image on right" },
        { "value": "left", "label": "Image on left" }
      ],
      "default": "right"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "left"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 20,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 72
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 20,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 72
    }
  ],
  "presets": [
    {
      "name": "Hero (Quirk & Craft)"
    }
  ]
}
{% endschema %}
