{%- liquid
  assign text_alignment = section.settings.text_alignment
  assign image_position = section.settings.image_position
  assign heading_text = section.settings.heading | default: ''
  assign accent_word = section.settings.accent_word | default: ''
  assign heading_markup = heading_text | escape

  if accent_word != blank
    assign accent_escaped = accent_word | escape
    assign accent_markup = '<span class="kc-hero__accent">' | append: accent_escaped | append: '</span>'
    assign heading_markup = heading_markup | replace_first: accent_escaped, accent_markup
  endif
-%}

<section
  class="kc-hero color-{{ section.settings.color_scheme }}"
  style="--kc-hero-pt: {{ section.settings.padding_top | round: 0 }}px; --kc-hero-pb: {{ section.settings.padding_bottom | round: 0 }}px;"
>
  <div class="kc-hero__inner">
    <div class="kc-hero__card kc-card-shadow kc-hero__card--image-{{ image_position }}">
      <div class="kc-hero__content{% if text_alignment == 'center' %} kc-hero__content--center{% endif %}">
        {% if section.settings.eyebrow != blank %}
          <span class="kc-pill">{{ section.settings.eyebrow }}</span>
        {% endif %}

        {% if section.settings.heading != blank %}
          <h1 class="kc-hero__title">
            {{ heading_markup }}
          </h1>
        {% endif %}

        {% if section.settings.subheading != blank %}
          <p class="kc-hero__subtitle">
            {{ section.settings.subheading }}
          </p>
        {% endif %}

        <div class="kc-hero__actions">
          {% if section.settings.primary_label != blank and section.settings.primary_link != blank %}
            <a class="kc-btn-primary" href="{{ section.settings.primary_link }}">
              {{ section.settings.primary_label }}
            </a>
          {% endif %}
          {% if section.settings.secondary_label != blank and section.settings.secondary_link != blank %}
            <a class="kc-btn-secondary" href="{{ section.settings.secondary_link }}">
              {{ section.settings.secondary_label }}
            </a>
          {% endif %}
        </div>

        {% if section.settings.stat_one != blank or section.settings.stat_two != blank or section.settings.stat_three != blank %}
          <div class="kc-stat-row">
            {% if section.settings.stat_one != blank %}
              <div class="kc-stat">{{ section.settings.stat_one }}</div>
            {% endif %}
            {% if section.settings.stat_two != blank %}
              <div class="kc-stat">{{ section.settings.stat_two }}</div>
            {% endif %}
            {% if section.settings.stat_three != blank %}
              <div class="kc-stat">{{ section.settings.stat_three }}</div>
            {% endif %}
          </div>
        {% endif %}
      </div>

      <div class="kc-hero__image">
        {% if section.settings.image != blank %}
          {% capture sizes %}
            (min-width: 990px) 540px, 90vw
          {% endcapture %}
          {% capture widths %}
            360, 480, 640, 800, 960, 1200
          {% endcapture %}
          {{
            section.settings.image
            | image_url: width: 1200
            | image_tag:
              class: 'kc-hero__media',
              widths: widths,
              sizes: sizes,
              alt: section.settings.image.alt | default: section.settings.heading | escape
          }}
        {% else %}
          <div class="kc-hero__media placeholder media">
            {{ 'lifestyle-2' | placeholder_svg_tag: 'placeholder-svg' }}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Hero (Kawaii Closet)",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "eyebrow",
      "label": "Pill label",
      "default": "New Spring Collection"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Dress in Your Dreamiest Style"
    },
    {
      "type": "text",
      "id": "accent_word",
      "label": "Accent word to highlight",
      "default": "Dreamiest"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Floaty silhouettes, plush textures, and pastel palettes that make every day feel a little more magical."
    },
    {
      "type": "text",
      "id": "primary_label",
      "label": "Primary button label",
      "default": "Shop Collection"
    },
    {
      "type": "url",
      "id": "primary_link",
      "label": "Primary button link",
      "default": "/collections/all"
    },
    {
      "type": "text",
      "id": "secondary_label",
      "label": "Secondary button label",
      "default": "How It Works"
    },
    {
      "type": "url",
      "id": "secondary_link",
      "label": "Secondary button link",
      "default": "/pages/about"
    },
    {
      "type": "text",
      "id": "stat_one",
      "label": "Stat 1",
      "default": "500+ Cute Items"
    },
    {
      "type": "text",
      "id": "stat_two",
      "label": "Stat 2",
      "default": "10k+ Happy Customers"
    },
    {
      "type": "text",
      "id": "stat_three",
      "label": "Stat 3",
      "default": "4.9 Rating (sparkles)"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Hero image"
    },
    {
      "type": "select",
      "id": "image_position",
      "label": "Image position on desktop",
      "options": [
        { "value": "right", "label": "Image on right" },
        { "value": "left", "label": "Image on left" }
      ],
      "default": "right"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "left"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 20,
      "max": 140,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 88
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 20,
      "max": 140,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 88
    }
  ],
  "presets": [
    {
      "name": "Hero (Kawaii Closet)"
    }
  ]
}
{% endschema %}
